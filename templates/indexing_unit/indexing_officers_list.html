{% extends 'indexing_unit/dashboard_base1.html'%}
{% load static %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}

{% block content %}
<div class="row mx-2">
<div class="col-md-12 mt-4 mx-1">
<div class="row">
<div class="col-md-12">
    <div class="card">
        <div class="card-body">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <form class="form-inline" method="get" action="{% url 'indexing_unit:indexing_officers_list' %}">
                <div class="form-group mr-2">
                    {{ form.institution_type.label_tag }}
                    {% render_field form.institution_type class='custom-select mb-0 ml-2' %}
                </div>
                <button type="submit" class="btn btn-primary">Filter</button>
            </form>

            <a href="{% url 'indexing_unit:create_indexing_officer' %}" class="btn btn-success">
                <i class="fa fa-plus"></i> Create Indexing Officer
            </a>
        </div>

        {% include 'partials/_alerts.html' %} 

        <h4 class="mt-0 header-title text-primary">
            {% if institution_type %}
                Indexing Officers â€” {{ institution_type }}
            {% else %}
                Indexing Officers List
            {% endif %}
        </h4>
        <p class="text-muted font-14">Registered Indexing Officers assigned to Institutions.</p>

        <table id="datatable-buttons" class="table table-striped table-bordered dt-responsive nowrap">
            <thead>
                <tr>
                    <th>Indexing Officer Name</th>
                    <th>Institution</th>
                    <th>Institution Type</th>
                    <th>Phone No</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for object in officers %}
                <tr>
                    <td>{{object.indexing_officer.get_full_name}}</td>
                    <td>{{object.institution.name}}</td>
                    <td>{{object.institution.institution_type}}</td>
                    <td>{{object.indexing_officer.phone_no}}</td>
                    <td>{{object.indexing_officer.email}}</td>
                    <td>
                        {% if object.indexing_officer.is_active %}
                            <span class="text-primary">ACTIVE <i class="fas fa-check"></i></span>
                        {% else %}
                            <span class="text-danger">DISABLED <i class="fas fa-times"></i></span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{object.get_absolute_url}}">
                            <span class="badge badge-boxed badge-primary">
                                <i class="fas fa-wrench"></i> View/Edit
                            </span>
                        </a>
                    </td>
                </tr>
            {% empty %}
                <tr><td colspan="7" class="text-center text-muted">No Indexing Officers found.</td></tr>
            {% endfor %}
            </tbody>
        </table>

        <div class="d-flex justify-content-end mt-3">
            <a href="{% url 'indexing_unit:dashboard' %}" class="btn btn-outline-primary">
                <i class="fa fa-angle-double-left"></i> Back to Dashboard
            </a>
        </div>

        </div>
    </div>
</div> 
</div> 
</div>
</div>



{% endblock %}
